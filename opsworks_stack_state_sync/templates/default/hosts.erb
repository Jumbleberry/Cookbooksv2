# This file was generated by OpsWorks
# any manual changes will be removed on the next update.

# The following lines are desirable for IPv6 capable hosts
::1 ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

# OpsWorks Layer State
127.0.0.1 localhost.<%= node[:environment] %> localhost
127.0.1.1 <%= @localhost_name %>.<%= node[:environment] %> <%= @localhost_name %>

<% @nodes.each do |i| -%>
<% if i["private_ip"] %>
<% if Resolv.getaddress(i["private_ip"]) -%>
<%= i["private_ip"] %> <%= i["name"] || i["hostname"] %>.<%= node[:environment] %> <%= i["name"] || i["hostname"] %>
<% else -%>
<%= "# Unable to resolve IP '#{i["private_ip"]}' for hostname '#{i["name"] || i["hostname"]}'" %>
<% end -%>
<% end -%>
<% if i["public_ip"] %>
<% if Resolv.getaddress(i["public_ip"]) -%>
<%= i["public_ip"] %> <%= i["name"] || i["hostname"] %>.<%= node[:environment] %>-ext <%= i["name"] || i["hostname"] %>-ext
<% else -%>
<%= "# Unable to resolve IP '#{i["public_ip"]}' for hostname '#{i["name"] || i["hostname"]}'" %>
<% end -%>
<% end -%>
<% end -%>